{
  "procedures": [
    {
      "name": "example-procedure",
      "requests": [
        {
          "tech": "http",
          "parameters": {
            "url": "http://localhost:8080/auth/realms/test/.well-known/openid-configuration",
            "method": "GET",
            "headers": [
              {
                "name": "accept",
                "values": ["application/json"]
              }
            ],
            "cookies": [],
            "query_parameters": [],
            "body": null,
            "proxy": null
          },
          "extractions": [
            {
              "name": "token_endpoint",
              "location": "body",
              "key": "token_endpoint"
            }
          ]
        },
        {
          "tech": "http",
          "parameters": {
            "url": "{{ token_endpoint }}",
            "method": "POST",
            "headers": [
              {
                "name": "content-type",
                "values": ["application/x-www-form-urlencoded"]
              },
              {
                "name": "accept",
                "values": ["application/json"]
              }
            ],
            "cookies": [],
            "query_parameters": [],
            "body": "grant_type=password&username={{ username }}&password={{ password }}&client_id={{ client_id }}&client_secret={{ client_secret }}",
            "proxy": null
          },
          "extractions": [
            {
              "name": "access_token",
              "location": "body",
              "key": "access_token"
            },
            {
              "name": "expires_in",
              "location": "body",
              "key": "expires_in"
            },
            {
              "name": "refresh_expires_in",
              "location": "body",
              "key": "refresh_expires_in"
            },
            {
              "name": "refresh_token",
              "location": "body",
              "key": "refresh_token"
            },
            {
              "name": "token_type",
              "location": "body",
              "key": "token_type"
            },
            {
              "name": "not-before-policy",
              "location": "body",
              "key": "not-before-policy"
            },
            {
              "name": "session_state",
              "location": "body",
              "key": "session_state"
            },
            {
              "name": "scope",
              "location": "body",
              "key": "scope"
            }
          ]
        }
      ]
    }
  ],
  "presets": [],
  "users": [
    {
      "name": "example-user",
      "credentials": {},
      "variables": [
        {
          "name": "username",
          "value": "user1"
        },
        {
          "name": "password",
          "value": "user1"
        },
        {
          "name": "client_id",
          "value": "server1"
        },
        {
          "name": "client_secret",
          "value": "secret"
        }
      ],
      "authentication": {
        "procedure": "example-procedure",
        "injections": [
          {
            "location": "header",
            "key": "Authorization",
            "prefix": "Bearer ",
            "variable": "access_token"
          }
        ]
      },
      "refresh": null
    }
  ],
  "$schema": "./multiauth-schema.json"
}
